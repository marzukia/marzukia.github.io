<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="UTF-8">
    <title>Andryo Marzuki</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="A few months ago, I had decided that it would be a great idea to convert my static-page blog (powered by Hugo) into a CMS made with Django and React. This post is going to talk about why that was a stupid idea and why I was a stupid person for thinking that it would be better than a static-page blog." />
    <meta name="keywords" content="andryo marzuki, technology, data analytics, business intelligence" />
    <meta itemprop="name" content="Making a React Blog and Why You Shouldn&#39;t (They Suck)">

    <meta property="og:title" content="Making a React Blog and Why You Shouldn&#39;t (They Suck)" />
    <meta property="og:image" content="https://mrzk.io/images/og-banner.png" />
    <meta property="og:image" content='' />
    <meta property="og:description" content="A few months ago, I had decided that it would be a great idea to convert my static-page blog (powered by Hugo) into a CMS made with Django and React. This post is going to talk about why that was a stupid idea and why I was a stupid person for thinking that it would be better than a static-page blog." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://mrzk.io/posts/making-a-react-blog-and-why-you-shouldnt-they-suck/" />

    <meta property="article:author" content="https://www.linkedin.com/in/andryomarzuki/" />
    <meta property="article:published_time" content="2021-10-29 00:00:00 &#43;0000 UTC">

    <meta name="twitter:card" content="summary_large_image">
    <meta property="twitter:domain" content="mrzk.io">
    <meta property="twitter:url" content="https://mrzk.io/posts/making-a-react-blog-and-why-you-shouldnt-they-suck/" />
    <meta name="twitter:title" content="Making a React Blog and Why You Shouldn&#39;t (They Suck)" />
    <meta name="twitter:description" content="A few months ago, I had decided that it would be a great idea to convert my static-page blog (powered by Hugo) into a CMS made with Django and React. This post is going to talk about why that was a stupid idea and why I was a stupid person for thinking that it would be better than a static-page blog." />
    <meta name="twitter:image" content="https://mrzk.io/images/og-banner.png">

    <link rel="apple-touch-icon" sizes="180x180" href="https://mrzk.io/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://mrzk.io/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://mrzk.io/favicon-16x16.png">

    
    <link rel="stylesheet" href="https://mrzk.io/scss/style.min.453a19520bf8a70d76c07a6d01f31757a6f8b986ec944616364573998ede776c.css">

    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-170171726-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-170171726-1');
    </script>
</head><body><header>
    <div class="site-title">
        <a href='https://mrzk.io/' alt=Andryo&#32;Marzuki>
            <svg
   width="132.29166mm"
   height="38.646618mm"
   viewBox="0 0 132.29166 38.646618"
   version="1.1"
   id="svg1587"
   inkscape:version="1.1 (c68e22c387, 2021-05-23)"
   sodipodi:docname="logo.svg"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg">
  <sodipodi:namedview
     id="namedview1589"
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1.0"
     inkscape:pageshadow="2"
     inkscape:pageopacity="0.0"
     inkscape:pagecheckerboard="0"
     inkscape:document-units="px"
     showgrid="false"
     inkscape:zoom="0.74457511"
     inkscape:cx="181.98298"
     inkscape:cy="445.89189"
     inkscape:window-width="2560"
     inkscape:window-height="1371"
     inkscape:window-x="0"
     inkscape:window-y="1472"
     inkscape:window-maximized="1"
     inkscape:current-layer="g207463"
     fit-margin-top="0"
     fit-margin-left="0"
     fit-margin-right="0"
     fit-margin-bottom="0" />
  <defs
     id="defs1584" />
  <g
     inkscape:label="Layer 1"
     inkscape:groupmode="layer"
     id="layer1"
     transform="translate(-23.968996,-50.153165)">
    <g
       id="g207463"
       transform="matrix(2.562842,0,0,2.562842,-70.880235,-128.18872)"
       style="stroke-width:0.390192">
      <g
         id="g207867"
         inkscape:export-filename="/home/andryo/logo.png"
         inkscape:export-xdpi="43.77"
         inkscape:export-ydpi="43.77"
         transform="matrix(1.1398749,0,0,1.1398749,-10.098017,-24.674857)">
        <g
           id="g2462-3-6"
           transform="matrix(2.0550572,0,0,2.0536728,-134.02958,-51.534253)"
           style="display:inline;stroke-width:0.189211;paint-order:fill markers stroke"
           inkscape:label="g2462-3">
          <g
             id="g164836"
             transform="translate(0.81892291)"
             style="stroke-width:0.189211">
            <g
               id="g207355"
               transform="matrix(0.60585854,0,0,0.60650002,35.548546,25.477297)"
               style="stroke-width:0.312136">
              <path
                 style="color:#000000;fill:#ef6f6c;fill-opacity:1;stroke:#ef6f6c;stroke-width:0.331606;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
                 d="m 83.991949,65.972596 c -0.229761,0.0011 -0.458941,0.0294 -0.68164,0.08594 l -0.195313,0.05078 1.367188,5.466797 0.197265,-0.04883 c 0.521891,-0.130541 0.979302,-0.402051 1.335581,-0.767772 0.499445,-0.512683 0.800149,-1.210504 0.801138,-1.96465 4.62e-4,-1.55648 -1.265785,-2.822728 -2.822266,-2.822266 z m 0.002,0.404297 c 1.337386,-3.97e-4 2.416413,1.080584 2.416016,2.417969 -0.0014,1.0328 -0.691302,1.886109 -1.650391,2.222656 L 83.61309,66.425721 c 0.126818,-0.02102 0.252095,-0.04823 0.380859,-0.04883 z"
                 id="path1361-7-9"
                 sodipodi:nodetypes="sccccscssscccss" />
              <path
                 style="color:#000000;fill:#c8c8c8;fill-opacity:1;stroke:#c8c8c8;stroke-width:0.165803;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
                 d="m 83.34375,72.017578 -0.792969,0.265625 -0.730469,-0.244141 -0.128906,0.384766 0.859375,0.285156 0.792969,-0.263672 0.792969,0.263672 0.859375,-0.285156 -0.128907,-0.384766 -0.730468,0.244141 z"
                 id="path2248-5-1" />
              <g
                 id="path3324-6-2"
                 inkscape:label="Mountain"
                 transform="matrix(0.16906935,0,0,0.16906935,30.83561,25.481525)"
                 style="stroke-width:0.312136">
                <path
                   style="color:#000000;fill:#000000;fill-opacity:0;stroke-width:0.976951;-inkscape-stroke:none"
                   d="m 297.95901,289.80307 12.44018,-49.76071 14.86693,59.46772 14.86693,-59.46772 12.44308,49.77227"
                   id="path11216" />
                <path
                   style="color:#000000;fill:#477160;fill-opacity:1;stroke:#477160;stroke-width:1.96136;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
                   d="m 309.23633,239.75195 -12.43946,49.75977 2.32422,0.58203 11.27735,-45.10742 13.70508,54.81445 h 2.32617 l 13.70312,-54.81836 11.28125,45.12305 2.32422,-0.58203 -12.44336,-49.77149 h -2.32422 l -13.70508,54.81446 -13.70312,-54.81446 z"
                   id="path11218" />
              </g>
            </g>
          </g>
        </g>
        <g
           id="g82068"
           transform="matrix(1.5511182,0,0,1.5511182,-73.685773,-19.254697)"
           style="stroke-width:0.251556">
          <g
             id="g97616"
             transform="translate(0.30734772,0.02438643)"
             style="stroke-width:0.251556">
            <text
               xml:space="preserve"
               style="font-size:5.29167px;line-height:1.25;font-family:'Droid Sans';-inkscape-font-specification:'Droid Sans';letter-spacing:-0.396875px;fill:#646464;fill-opacity:1;stroke-width:0.0665574"
               x="82.43605"
               y="69.722878"
               id="text22981"><tspan
                 sodipodi:role="line"
                 id="tspan22979"
                 style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:5.29167px;font-family:monospace;-inkscape-font-specification:monospace;fill:#646464;fill-opacity:1;stroke-width:0.0665574"
                 x="82.43605"
                 y="69.722878">andryo</tspan></text>
            <text
               xml:space="preserve"
               style="font-size:5.29167px;line-height:1.25;font-family:'Droid Sans';-inkscape-font-specification:'Droid Sans';letter-spacing:-0.264583px;stroke-width:0.0665574"
               x="82.498062"
               y="74.156311"
               id="text22981-3"><tspan
                 sodipodi:role="line"
                 id="tspan22979-6"
                 style="font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-size:5.29167px;font-family:monospace;-inkscape-font-specification:monospace;fill:#ef6f6c;fill-opacity:1;stroke-width:0.0665574"
                 x="82.498062"
                 y="74.156311">marzuki</tspan></text>
          </g>
        </g>
      </g>
    </g>
  </g>
</svg>

        </a>
    </div>
    <div class="socials">



<a
  href="https://twitter.com/mrzkio"
  target="_blank"
  class="social-link"
  title="Twitter link"
  rel="noopener"
  aria-label="follow on Twitterâ€”â€”Opens in a new window"
>
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M0 0v24h24v-24h-24zm18.862 9.237c.208 4.617-3.235 9.765-9.33 9.765-1.854 0-3.579-.543-5.032-1.475 1.742.205 3.48-.278 4.86-1.359-1.437-.027-2.649-.976-3.066-2.28.515.098 1.021.069 1.482-.056-1.579-.317-2.668-1.739-2.633-3.26.442.246.949.394 1.486.411-1.461-.977-1.875-2.907-1.016-4.383 1.619 1.986 4.038 3.293 6.766 3.43-.479-2.053 1.079-4.03 3.198-4.03.944 0 1.797.398 2.396 1.037.748-.147 1.451-.42 2.085-.796-.245.767-.766 1.41-1.443 1.816.664-.08 1.297-.256 1.885-.517-.44.656-.997 1.234-1.638 1.697z"/></svg>
</a>


<a
  href="https://instagram.com/andryo"
  target="_blank"
  class="social-link"
  title="Instagram link"
  rel="noopener"
  aria-label="follow on Instagramâ€”â€”Opens in a new window"
>
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M14.667 12c0 1.473-1.194 2.667-2.667 2.667-1.473 0-2.667-1.193-2.667-2.667 0-1.473 1.194-2.667 2.667-2.667 1.473 0 2.667 1.194 2.667 2.667zm3.846-3.232c.038.843.046 1.096.046 3.232s-.008 2.389-.046 3.233c-.1 2.15-1.109 3.181-3.279 3.279-.844.038-1.097.047-3.234.047-2.136 0-2.39-.008-3.232-.046-2.174-.099-3.181-1.132-3.279-3.279-.039-.845-.048-1.098-.048-3.234s.009-2.389.047-3.232c.099-2.152 1.109-3.181 3.279-3.279.844-.039 1.097-.047 3.233-.047s2.39.008 3.233.046c2.168.099 3.18 1.128 3.28 3.28zm-2.405 3.232c0-2.269-1.84-4.108-4.108-4.108-2.269 0-4.108 1.839-4.108 4.108 0 2.269 1.84 4.108 4.108 4.108 2.269 0 4.108-1.839 4.108-4.108zm1.122-4.27c0-.53-.43-.96-.96-.96s-.96.43-.96.96.43.96.96.96c.531 0 .96-.43.96-.96zm6.77-7.73v24h-24v-24h24zm-4 12c0-2.172-.009-2.445-.048-3.298-.131-2.902-1.745-4.52-4.653-4.653-.854-.04-1.126-.049-3.299-.049s-2.444.009-3.298.048c-2.906.133-4.52 1.745-4.654 4.653-.039.854-.048 1.127-.048 3.299 0 2.173.009 2.445.048 3.298.134 2.906 1.746 4.521 4.654 4.654.854.039 1.125.048 3.298.048s2.445-.009 3.299-.048c2.902-.133 4.522-1.745 4.653-4.654.039-.853.048-1.125.048-3.298z"/></svg>
</a>



<a
  href="https://linkedin.com/in/andryomarzuki"
  target="_blank"
  class="social-link"
  title="LinkedIn link"
  rel="noopener"
  aria-label="follow on LinkedInâ€”â€”Opens in a new window"
>
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M0 0v24h24v-24h-24zm8 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.397-2.586 7-2.777 7 2.476v6.759z"/></svg>
</a>


<a
  href="https://github.com/marzukia"
  target="_blank"
  class="social-link"
  title="Github link"
  rel="noopener"
  aria-label="follow on Githubâ€”â€”Opens in a new window"
>
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M0 0v24h24v-24h-24zm14.534 19.59c-.406.078-.534-.171-.534-.384v-2.195c0-.747-.262-1.233-.55-1.481 1.782-.198 3.654-.875 3.654-3.947 0-.874-.311-1.588-.824-2.147.083-.202.357-1.016-.079-2.117 0 0-.671-.215-2.198.82-.639-.18-1.323-.267-2.003-.271-.68.003-1.364.091-2.003.269-1.528-1.035-2.2-.82-2.2-.82-.434 1.102-.16 1.915-.077 2.118-.512.56-.824 1.273-.824 2.147 0 3.064 1.867 3.751 3.645 3.954-.229.2-.436.552-.508 1.07-.457.204-1.614.557-2.328-.666 0 0-.423-.768-1.227-.825 0 0-.78-.01-.055.487 0 0 .525.246.889 1.17 0 0 .463 1.428 2.688.944v1.489c0 .211-.129.459-.528.385-3.18-1.057-5.472-4.056-5.472-7.59 0-4.419 3.582-8 8-8s8 3.581 8 8c0 3.533-2.289 6.531-5.466 7.59z"/></svg>
</a>




</div>
</header>
<div class="post">
    <div class="post-title">
        <h1>Making a React Blog and Why You Shouldn&#39;t (They Suck)</h1>
        <div class="post-title-detail">
            <span data-icon="ðŸ¸"><a href="https://linkedin.com/in/andryomarzuki">Andryo Marzuki</a></span>
            <span data-icon="ðŸ•’">October 29, 2021</span>
        </div>
    </div>
    <div class="post-content">
        <p>A couple of months ago, I thought it would be a fun project to create my own CMS/blog to replace the static pages (Hugo) blog I currently had deployed on my GitHub Pages. My primary motivator for doing this was my perceived lack of flexibility of Hugo, which was the lack of flexibility outside of written content. The biggest strength of a static pages blog is that it&rsquo;s all pre-rendered; your website will load lightning-quick and give you great SEO; however, it becomes a massive chore when you attempt to integrate external projects.</p>
<p>I let it run for a couple of months before I decided the other day that I&rsquo;d had enough and reverted to my Hugo blog.</p>
<h2 id="the-challenge">The Challenge</h2>
<p>I went with a Django (with DRF) backend, React (with RTK) frontend, and PostgreSQL for this particular project - this combination is probably my project favourite stack. With a little bit of tweaking, you can get a project up and running in no time at all. While I love this project stack, this experience has taught me a valuable lesson. There is no such thing as a one-size-fits-all solution.</p>
<h3 id="architecture">Architecture</h3>
<p>An application made with React can be incredibly dynamic and flexible. Still, one of its biggest problems is that it is an incredible pain in the ass to do the SEO and performance comparable to that of a static page.</p>
<p>Server-side rendering (SSR) becomes a necessity when you dynamically set meta tags for your content; this means that the minimum architecture you would need to deploy a React CMS/blog is as follows:</p>
<p><img src="https://mrzk.io/images/react_blog/flow.png" alt="Architecture flow chart of my project"></p>
<p>The application flow works out to be something like this:</p>
<ol>
<li>A user requests to visit a page</li>
<li>NGINX routes the request to the relevant parts of the application</li>
<li>The React SSR needs to render the React page and relevant meta tags before returning it to the user. The SSR requests the metadata from the backend.</li>
<li>The metadata is retrieved from the backend and injected into the HTML response.</li>
<li>Both the backend and SSR return their respective responses to NGINX.</li>
<li>NGINX routes through the appropriate reverse proxy, and the user receives the rendered page.</li>
</ol>
<p>If it looks overly complicated, that&rsquo;s because it is. In hindsight, I may have over-engineered this, but I couldn&rsquo;t develop another way to make this reliably work. If someone smarter than me has an easier way to achieve what I was trying to do, please reach out to me and let me know.</p>
<p>When I checked the website on Google to see how it performed, it performed awfully. Too many things were happening behind the scenes, which resulted in sluggish performance. It&rsquo;s just not comparable to a static page where all the content is ready to go.</p>
<h2 id="other-issues">Other Issues</h2>
<p>Beyond performance, there are other costs to doing this approach, making the whole thing even more unappealing. Depending on your stance and preferences, you may consider me unreasonable here, but hear me out.</p>
<h3 id="deployment-overhead">Deployment Overhead</h3>
<p>Naturally, having a Django/React application was more resource-intensive in regards to deployment. I self-host my applications, so the cost, in this case, was not monetary. Instead, it was the administrative overhead of deploying this project. In this case, we have even more overhead than a standard Django/React application as we need to worry about the SSR element of the project.</p>
<p>It&rsquo;s tough to compete with the almost no-overhead static pages type blog, especially when paired with something like GitHub pages which makes the process almost braindead.</p>
<p>In my case, when I want to make changes to the blog, I execute a simple shell script:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span><span style="color:#111">shopt</span> -s extglob
<span style="color:#111">cd</span> marzukia.github.io/
git checkout master
rm -rv !<span style="color:#f92672">(</span><span style="color:#d88200">&#34;CNAME&#34;</span><span style="color:#111">|</span><span style="color:#d88200">&#34;.git/&#34;</span><span style="color:#f92672">)</span>
<span style="color:#111">cd</span> ..
hugo
<span style="color:#111">cd</span> marzukia.github.io/
git add .
git commit -m <span style="color:#d88200">&#39;deploy changes&#39;</span>
git push
<span style="color:#111">cd</span> ..
<span style="color:#111">cd</span> themes/salt
git add .
git commit -m <span style="color:#d88200">&#39;deploy changes&#39;</span>
git push
<span style="color:#111">cd</span> ../..
git add .
git commit -m <span style="color:#d88200">&#39;new post or changes&#39;</span>
git push
</code></pre></div><p>As soon as I execute the script, it&rsquo;ll run Hugo to build the static pages, recursively go into each submodule I have associated with the project, push changes, and we&rsquo;re good to go. While in general, I would not consider the deployment overhead a factor, given the alternative is so easy, it becomes a pretty material consideration.</p>
<h3 id="ongoing-development--maintenance">Ongoing Development &amp; Maintenance</h3>
<p>Why start a project if you aren&rsquo;t going to maintain it? Having an application that has a backend, frontend and database will, of course, require more love and attention than a static page which is just HTML and CSS. This complaint seems like a stupid thing to whinge about, but given the purpose of my blog, I couldn&rsquo;t justify it.</p>
<p>My blog serves two purposes for me:</p>
<ol>
<li>The blog acts as a diary of sorts to help me crystalise my thoughts and retrospectively review things I&rsquo;ve done.</li>
<li>The blog acts as a tool to help me build and maintain a social media presence in the industry.</li>
</ol>
<p>Ultimately, it came back to &ldquo;this is not worth it&rdquo; for me.</p>
<h2 id="why-do-it">Why Do It?</h2>
<p>I&rsquo;ve been fairly negative in this article, but I did allude to having reasons for doing this in the first place.</p>
<h3 id="dynamic-pages--data">Dynamic Pages &amp; Data</h3>
<p>I absolutely love creating exciting data visualisations and tools. One significant benefit of building the project in Django/React meant that I had a much more sophisticated toolset to work with in terms of the content I could produce. The tool that I had packaged with the release of my React blog was a game-price finder that analysed scraped data from Wata Games/Heritage Auctions.</p>
<blockquote>
<p><strong>Note</strong>: This tool will be down at the time of writing, but I&rsquo;ll look at rebuilding it without the blog component. Also, you can find the aforementioned article <a href="https://mrzk.io/collectable-video-games-market-manipulation/">here</a>.</p>
</blockquote>
<p>I will make standalone applications in the future rather than trying to have it all unified as a single experience.</p>
<h3 id="good-practice--self-reflection">Good Practice &amp; Self Reflection</h3>
<p>I recently discovered RTK Query this year, and I love it. I haven&rsquo;t had much time to explore the full capabilities, so I thought this project would be great practice.</p>
<p>Another huge thing for me was the opportunity to self-reflect on the progress I&rsquo;ve made as a developer. Every time I do a Python, TypeScript, or C# project, I use it as a way to see how my overall code quality has improved. Ultimately, this blog rework was a bit of a pointless exercise. The project itself may not be valuable, but the lessons learned are valuable and immediately apply to my personal and professional work.</p>
<p>It&rsquo;s also never a bad thing to have too much code in your GitHub. There&rsquo;s no doubt in the future, and I may run into a problem that will require a solution that I&rsquo;ve already come up with.</p>
<h2 id="closing-thoughts">Closing Thoughts</h2>
<p>I don&rsquo;t know where I was going with this blog post - but if you&rsquo;ve managed to make it this far, I hope it was at least somewhat interesting. If you were considering making a React blog and I&rsquo;ve successfully stopped you, I will take that as a win.</p>
<p>In conclusion, don&rsquo;t bother trying to make React blog, it sucks, and it&rsquo;s painful to do. I&rsquo;m open to changing my mind here, but for now, this will be my position.</p>
<p>I&rsquo;ll close this section off with a self explanatory picture as to why static page blogs kick ass.</p>
<p><img src="https://mrzk.io/images/react_blog/report.png" alt="The bottom line."></p>
<h2 id="server-side-rendering-code">Server-Side Rendering Code</h2>
<p>If you stumble across this page sometime in the future and you want to know how I set up my SSR, I&rsquo;ve placed the code snippet below.</p>
<p>I&rsquo;m going to add a disclaimer here that I do not have much familiarity with NodeJS, nor do I work in plain JavaScript very often. There will be a certain level of &ldquo;jank&rdquo; that I won&rsquo;t be able to hide in the following code snippet.</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#00a8c8">import</span> <span style="color:#75af00">express</span> <span style="color:#75af00">from</span> <span style="color:#d88200">&#39;express&#39;</span><span style="color:#111">;</span>
<span style="color:#00a8c8">import</span> <span style="color:#75af00">path</span> <span style="color:#75af00">from</span> <span style="color:#d88200">&#39;path&#39;</span><span style="color:#111">;</span>
<span style="color:#00a8c8">import</span> <span style="color:#75af00">fs</span> <span style="color:#75af00">from</span> <span style="color:#d88200">&#39;fs&#39;</span><span style="color:#111">;</span>
<span style="color:#00a8c8">import</span> <span style="color:#75af00">fetch</span> <span style="color:#75af00">from</span> <span style="color:#d88200">&#39;node-fetch&#39;</span><span style="color:#111">;</span>

<span style="color:#00a8c8">var</span> <span style="color:#75af00">app</span> <span style="color:#f92672">=</span> <span style="color:#75af00">express</span><span style="color:#111">();</span>
<span style="color:#00a8c8">const</span> <span style="color:#ae81ff">__</span><span style="color:#75af00">dirname</span> <span style="color:#f92672">=</span> <span style="color:#75af00">path</span><span style="color:#111">.</span><span style="color:#75af00">resolve</span><span style="color:#111">();</span>
<span style="color:#00a8c8">const</span> <span style="color:#75af00">port</span> <span style="color:#f92672">=</span> <span style="color:#75af00">process</span><span style="color:#111">.</span><span style="color:#75af00">env</span><span style="color:#111">.</span><span style="color:#75af00">PORT</span> <span style="color:#f92672">||</span> <span style="color:#ae81ff">1235</span><span style="color:#111">;</span>

<span style="color:#75af00">app</span><span style="color:#111">.</span><span style="color:#75af00">use</span><span style="color:#111">(</span><span style="color:#75af00">express</span><span style="color:#111">.</span><span style="color:#00a8c8">static</span><span style="color:#111">(</span><span style="color:#75af00">path</span><span style="color:#111">.</span><span style="color:#75af00">resolve</span><span style="color:#111">(</span><span style="color:#ae81ff">__</span><span style="color:#75af00">dirname</span><span style="color:#111">,</span> <span style="color:#d88200">&#39;./build&#39;</span><span style="color:#111">)));</span>

<span style="color:#75af00">app</span><span style="color:#111">.</span><span style="color:#75af00">get</span><span style="color:#111">(</span><span style="color:#d88200">&#39;/&#39;</span><span style="color:#111">,</span> <span style="color:#00a8c8">function</span> <span style="color:#111">(</span><span style="color:#75af00">request</span><span style="color:#111">,</span> <span style="color:#75af00">response</span><span style="color:#111">)</span> <span style="color:#111">{</span>
    <span style="color:#00a8c8">const</span> <span style="color:#75af00">filePath</span> <span style="color:#f92672">=</span> <span style="color:#75af00">path</span><span style="color:#111">.</span><span style="color:#75af00">resolve</span><span style="color:#111">(</span><span style="color:#ae81ff">__</span><span style="color:#75af00">dirname</span><span style="color:#111">,</span> <span style="color:#d88200">&#39;./build&#39;</span><span style="color:#111">,</span> <span style="color:#d88200">&#39;index.html&#39;</span><span style="color:#111">);</span>

    <span style="color:#75af00">fs</span><span style="color:#111">.</span><span style="color:#75af00">readFile</span><span style="color:#111">(</span><span style="color:#75af00">filePath</span><span style="color:#111">,</span> <span style="color:#d88200">&#39;utf8&#39;</span><span style="color:#111">,</span> <span style="color:#00a8c8">function</span> <span style="color:#111">(</span><span style="color:#75af00">err</span><span style="color:#111">,</span> <span style="color:#75af00">data</span><span style="color:#111">)</span> <span style="color:#111">{</span>
        <span style="color:#00a8c8">if</span> <span style="color:#111">(</span><span style="color:#75af00">err</span><span style="color:#111">)</span> <span style="color:#111">{</span>
            <span style="color:#00a8c8">return</span> <span style="color:#75af00">console</span><span style="color:#111">.</span><span style="color:#75af00">log</span><span style="color:#111">(</span><span style="color:#75af00">err</span><span style="color:#111">);</span>
        <span style="color:#111">}</span>

        <span style="color:#75715e">// replace the special strings with server generated strings
</span><span style="color:#75715e"></span>        <span style="color:#75af00">data</span> <span style="color:#f92672">=</span> <span style="color:#75af00">data</span><span style="color:#111">.</span><span style="color:#75af00">replace</span><span style="color:#111">(</span><span style="color:#d88200">/\$OG_TITLE/g</span><span style="color:#111">,</span> <span style="color:#d88200">&#39;Andryo Marzuki - Data &amp; Analytics&#39;</span><span style="color:#111">);</span>
        <span style="color:#75af00">data</span> <span style="color:#f92672">=</span> <span style="color:#75af00">data</span><span style="color:#111">.</span><span style="color:#75af00">replace</span><span style="color:#111">(</span><span style="color:#d88200">/\$OG_DESCRIPTION/g</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;Data analytics &amp; personal blog of Andryo Marzuki&#34;</span><span style="color:#111">);</span>
        <span style="color:#75af00">response</span><span style="color:#111">.</span><span style="color:#75af00">send</span><span style="color:#111">(</span><span style="color:#75af00">data</span><span style="color:#111">);</span>
    <span style="color:#111">});</span>
<span style="color:#111">});</span>

<span style="color:#75af00">app</span><span style="color:#111">.</span><span style="color:#75af00">get</span><span style="color:#111">(</span><span style="color:#d88200">&#39;/about&#39;</span><span style="color:#111">,</span> <span style="color:#00a8c8">function</span> <span style="color:#111">(</span><span style="color:#75af00">request</span><span style="color:#111">,</span> <span style="color:#75af00">response</span><span style="color:#111">)</span> <span style="color:#111">{</span>
    <span style="color:#00a8c8">const</span> <span style="color:#75af00">filePath</span> <span style="color:#f92672">=</span> <span style="color:#75af00">path</span><span style="color:#111">.</span><span style="color:#75af00">resolve</span><span style="color:#111">(</span><span style="color:#ae81ff">__</span><span style="color:#75af00">dirname</span><span style="color:#111">,</span> <span style="color:#d88200">&#39;./build&#39;</span><span style="color:#111">,</span> <span style="color:#d88200">&#39;index.html&#39;</span><span style="color:#111">)</span>
    <span style="color:#75af00">fs</span><span style="color:#111">.</span><span style="color:#75af00">readFile</span><span style="color:#111">(</span><span style="color:#75af00">filePath</span><span style="color:#111">,</span> <span style="color:#d88200">&#39;utf8&#39;</span><span style="color:#111">,</span> <span style="color:#00a8c8">function</span> <span style="color:#111">(</span><span style="color:#75af00">err</span><span style="color:#111">,</span> <span style="color:#75af00">data</span><span style="color:#111">)</span> <span style="color:#111">{</span>
        <span style="color:#00a8c8">if</span> <span style="color:#111">(</span><span style="color:#75af00">err</span><span style="color:#111">)</span> <span style="color:#111">{</span>
            <span style="color:#00a8c8">return</span> <span style="color:#75af00">console</span><span style="color:#111">.</span><span style="color:#75af00">log</span><span style="color:#111">(</span><span style="color:#75af00">err</span><span style="color:#111">);</span>
        <span style="color:#111">}</span>
        <span style="color:#75af00">data</span> <span style="color:#f92672">=</span> <span style="color:#75af00">data</span><span style="color:#111">.</span><span style="color:#75af00">replace</span><span style="color:#111">(</span><span style="color:#d88200">/\$OG_TITLE/g</span><span style="color:#111">,</span> <span style="color:#d88200">&#39;Andryo Marzuki - About&#39;</span><span style="color:#111">);</span>
        <span style="color:#75af00">data</span> <span style="color:#f92672">=</span> <span style="color:#75af00">data</span><span style="color:#111">.</span><span style="color:#75af00">replace</span><span style="color:#111">(</span><span style="color:#d88200">/\$OG_DESCRIPTION/g</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;About Andryo Marzuki, career history and interests.&#34;</span><span style="color:#111">);</span>
        <span style="color:#75af00">response</span><span style="color:#111">.</span><span style="color:#75af00">send</span><span style="color:#111">(</span><span style="color:#75af00">data</span><span style="color:#111">);</span>
    <span style="color:#111">});</span>
<span style="color:#111">});</span>

<span style="color:#75af00">app</span><span style="color:#111">.</span><span style="color:#75af00">get</span><span style="color:#111">(</span><span style="color:#d88200">&#39;/contact&#39;</span><span style="color:#111">,</span> <span style="color:#00a8c8">function</span> <span style="color:#111">(</span><span style="color:#75af00">request</span><span style="color:#111">,</span> <span style="color:#75af00">response</span><span style="color:#111">)</span> <span style="color:#111">{</span>
    <span style="color:#00a8c8">const</span> <span style="color:#75af00">filePath</span> <span style="color:#f92672">=</span> <span style="color:#75af00">path</span><span style="color:#111">.</span><span style="color:#75af00">resolve</span><span style="color:#111">(</span><span style="color:#ae81ff">__</span><span style="color:#75af00">dirname</span><span style="color:#111">,</span> <span style="color:#d88200">&#39;./build&#39;</span><span style="color:#111">,</span> <span style="color:#d88200">&#39;index.html&#39;</span><span style="color:#111">)</span>
    <span style="color:#75af00">fs</span><span style="color:#111">.</span><span style="color:#75af00">readFile</span><span style="color:#111">(</span><span style="color:#75af00">filePath</span><span style="color:#111">,</span> <span style="color:#d88200">&#39;utf8&#39;</span><span style="color:#111">,</span> <span style="color:#00a8c8">function</span> <span style="color:#111">(</span><span style="color:#75af00">err</span><span style="color:#111">,</span> <span style="color:#75af00">data</span><span style="color:#111">)</span> <span style="color:#111">{</span>
        <span style="color:#00a8c8">if</span> <span style="color:#111">(</span><span style="color:#75af00">err</span><span style="color:#111">)</span> <span style="color:#111">{</span>
            <span style="color:#00a8c8">return</span> <span style="color:#75af00">console</span><span style="color:#111">.</span><span style="color:#75af00">log</span><span style="color:#111">(</span><span style="color:#75af00">err</span><span style="color:#111">);</span>
        <span style="color:#111">}</span>
        <span style="color:#75af00">data</span> <span style="color:#f92672">=</span> <span style="color:#75af00">data</span><span style="color:#111">.</span><span style="color:#75af00">replace</span><span style="color:#111">(</span><span style="color:#d88200">/\$OG_TITLE/g</span><span style="color:#111">,</span> <span style="color:#d88200">&#39;Andryo Marzuki Contact Details&#39;</span><span style="color:#111">);</span>
        <span style="color:#75af00">data</span> <span style="color:#f92672">=</span> <span style="color:#75af00">data</span><span style="color:#111">.</span><span style="color:#75af00">replace</span><span style="color:#111">(</span><span style="color:#d88200">/\$OG_DESCRIPTION/g</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;Contact details for Andryo Marzuki&#34;</span><span style="color:#111">);</span>
        <span style="color:#75af00">response</span><span style="color:#111">.</span><span style="color:#75af00">send</span><span style="color:#111">(</span><span style="color:#75af00">data</span><span style="color:#111">);</span>
    <span style="color:#111">});</span>
<span style="color:#111">});</span>

<span style="color:#75af00">app</span><span style="color:#111">.</span><span style="color:#75af00">get</span><span style="color:#111">(</span><span style="color:#d88200">&#39;/posts/*&#39;</span><span style="color:#111">,</span> <span style="color:#00a8c8">function</span> <span style="color:#111">(</span><span style="color:#75af00">request</span><span style="color:#111">,</span> <span style="color:#75af00">response</span><span style="color:#111">)</span> <span style="color:#111">{</span>
    <span style="color:#00a8c8">const</span> <span style="color:#75af00">filePath</span> <span style="color:#f92672">=</span> <span style="color:#75af00">path</span><span style="color:#111">.</span><span style="color:#75af00">resolve</span><span style="color:#111">(</span><span style="color:#ae81ff">__</span><span style="color:#75af00">dirname</span><span style="color:#111">,</span> <span style="color:#d88200">&#39;./build&#39;</span><span style="color:#111">,</span> <span style="color:#d88200">&#39;index.html&#39;</span><span style="color:#111">);</span>
    <span style="color:#75af00">fs</span><span style="color:#111">.</span><span style="color:#75af00">readFile</span><span style="color:#111">(</span><span style="color:#75af00">filePath</span><span style="color:#111">,</span> <span style="color:#d88200">&#39;utf8&#39;</span><span style="color:#111">,</span> <span style="color:#00a8c8">function</span> <span style="color:#111">(</span><span style="color:#75af00">err</span><span style="color:#111">,</span> <span style="color:#75af00">data</span><span style="color:#111">)</span> <span style="color:#111">{</span>
        <span style="color:#00a8c8">if</span> <span style="color:#111">(</span><span style="color:#75af00">err</span><span style="color:#111">)</span> <span style="color:#111">{</span>
            <span style="color:#00a8c8">return</span> <span style="color:#75af00">console</span><span style="color:#111">.</span><span style="color:#75af00">log</span><span style="color:#111">(</span><span style="color:#75af00">err</span><span style="color:#111">);</span>
        <span style="color:#111">}</span>

        <span style="color:#00a8c8">const</span> <span style="color:#75af00">doAsync</span> <span style="color:#f92672">=</span> <span style="color:#00a8c8">async</span> <span style="color:#111">()</span> <span style="color:#111">=&gt;</span> <span style="color:#111">{</span>
            <span style="color:#00a8c8">const</span> <span style="color:#75af00">meta</span> <span style="color:#f92672">=</span> <span style="color:#00a8c8">await</span> <span style="color:#75af00">fetch</span><span style="color:#111">(</span><span style="color:#d88200">`https://api.mrzk.io</span><span style="color:#d88200">${</span><span style="color:#75af00">request</span><span style="color:#111">.</span><span style="color:#75af00">url</span><span style="color:#d88200">}</span><span style="color:#d88200">?meta=True`</span><span style="color:#111">)</span>
                <span style="color:#111">.</span><span style="color:#75af00">then</span><span style="color:#111">(</span><span style="color:#75af00">response</span> <span style="color:#111">=&gt;</span> <span style="color:#75af00">response</span><span style="color:#111">.</span><span style="color:#75af00">json</span><span style="color:#111">())</span>

            <span style="color:#75af00">data</span> <span style="color:#f92672">=</span> <span style="color:#75af00">data</span><span style="color:#111">.</span><span style="color:#75af00">replace</span><span style="color:#111">(</span><span style="color:#d88200">/\$OG_TITLE/g</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;Andryo Marzuki - &#34;</span> <span style="color:#f92672">+</span> <span style="color:#75af00">meta</span><span style="color:#111">.</span><span style="color:#75af00">title</span><span style="color:#111">);</span>
            <span style="color:#75af00">data</span> <span style="color:#f92672">=</span> <span style="color:#75af00">data</span><span style="color:#111">.</span><span style="color:#75af00">replace</span><span style="color:#111">(</span><span style="color:#d88200">/\$OG_DESCRIPTION/g</span><span style="color:#111">,</span> <span style="color:#75af00">meta</span><span style="color:#111">.</span><span style="color:#75af00">description</span><span style="color:#111">);</span>
            <span style="color:#75af00">data</span> <span style="color:#f92672">=</span> <span style="color:#75af00">data</span><span style="color:#111">.</span><span style="color:#75af00">replace</span><span style="color:#111">(</span><span style="color:#d88200">/\$OG_URL/g</span><span style="color:#111">,</span> <span style="color:#d88200">`https://mrzk.io</span><span style="color:#d88200">${</span><span style="color:#75af00">request</span><span style="color:#111">.</span><span style="color:#75af00">url</span><span style="color:#d88200">}</span><span style="color:#d88200">`</span><span style="color:#111">);</span>
            <span style="color:#75af00">data</span> <span style="color:#f92672">=</span> <span style="color:#75af00">data</span><span style="color:#111">.</span><span style="color:#75af00">replace</span><span style="color:#111">(</span><span style="color:#d88200">/\$OG_PUBLISH_TIME/g</span><span style="color:#111">,</span> <span style="color:#75af00">meta</span><span style="color:#111">.</span><span style="color:#75af00">createdDate</span><span style="color:#111">);</span>

            <span style="color:#75af00">response</span><span style="color:#111">.</span><span style="color:#75af00">send</span><span style="color:#111">(</span><span style="color:#75af00">data</span><span style="color:#111">);</span>
        <span style="color:#111">};</span>
        <span style="color:#75af00">doAsync</span><span style="color:#111">();</span>
    <span style="color:#111">});</span>
<span style="color:#111">});</span>

<span style="color:#75af00">app</span><span style="color:#111">.</span><span style="color:#75af00">get</span><span style="color:#111">(</span><span style="color:#d88200">&#39;*&#39;</span><span style="color:#111">,</span> <span style="color:#00a8c8">function</span> <span style="color:#111">(</span><span style="color:#75af00">request</span><span style="color:#111">,</span> <span style="color:#75af00">response</span><span style="color:#111">)</span> <span style="color:#111">{</span>
    <span style="color:#00a8c8">const</span> <span style="color:#75af00">filePath</span> <span style="color:#f92672">=</span> <span style="color:#75af00">path</span><span style="color:#111">.</span><span style="color:#75af00">resolve</span><span style="color:#111">(</span><span style="color:#ae81ff">__</span><span style="color:#75af00">dirname</span><span style="color:#111">,</span> <span style="color:#d88200">&#39;./build&#39;</span><span style="color:#111">,</span> <span style="color:#d88200">&#39;index.html&#39;</span><span style="color:#111">);</span>
    <span style="color:#75af00">fs</span><span style="color:#111">.</span><span style="color:#75af00">readFile</span><span style="color:#111">(</span><span style="color:#75af00">filePath</span><span style="color:#111">,</span> <span style="color:#d88200">&#39;utf8&#39;</span><span style="color:#111">,</span> <span style="color:#00a8c8">function</span> <span style="color:#111">(</span><span style="color:#75af00">err</span><span style="color:#111">,</span> <span style="color:#75af00">data</span><span style="color:#111">)</span> <span style="color:#111">{</span>
        <span style="color:#00a8c8">if</span> <span style="color:#111">(</span><span style="color:#75af00">err</span><span style="color:#111">)</span> <span style="color:#111">{</span>
            <span style="color:#00a8c8">return</span> <span style="color:#75af00">console</span><span style="color:#111">.</span><span style="color:#75af00">log</span><span style="color:#111">(</span><span style="color:#75af00">err</span><span style="color:#111">);</span>
        <span style="color:#111">}</span>

        <span style="color:#75af00">data</span> <span style="color:#f92672">=</span> <span style="color:#75af00">data</span><span style="color:#111">.</span><span style="color:#75af00">replace</span><span style="color:#111">(</span><span style="color:#d88200">/\$OG_TITLE/g</span><span style="color:#111">,</span> <span style="color:#d88200">&#39;Andryo Marzuki - Data &amp; Analytics&#39;</span><span style="color:#111">);</span>
        <span style="color:#75af00">data</span> <span style="color:#f92672">=</span> <span style="color:#75af00">data</span><span style="color:#111">.</span><span style="color:#75af00">replace</span><span style="color:#111">(</span><span style="color:#d88200">/\$OG_DESCRIPTION/g</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;Data analytics &amp; personal blog of Andryo Marzuki&#34;</span><span style="color:#111">);</span>

        <span style="color:#75af00">response</span><span style="color:#111">.</span><span style="color:#75af00">send</span><span style="color:#111">(</span><span style="color:#75af00">data</span><span style="color:#111">);</span>
    <span style="color:#111">});</span>
<span style="color:#111">});</span>

<span style="color:#75af00">app</span><span style="color:#111">.</span><span style="color:#75af00">listen</span><span style="color:#111">(</span><span style="color:#75af00">port</span><span style="color:#111">,</span> <span style="color:#111">()</span> <span style="color:#111">=&gt;</span> <span style="color:#75af00">console</span><span style="color:#111">.</span><span style="color:#75af00">log</span><span style="color:#111">(</span><span style="color:#d88200">`Listening on port </span><span style="color:#d88200">${</span><span style="color:#75af00">port</span><span style="color:#d88200">}</span><span style="color:#d88200">`</span><span style="color:#111">));</span>
</code></pre></div>
    </div>
</div>
<footer>
    Â© 2019-2021, Andryo Marzuki
</footer>
</body>
</html>
